# Контекст проекта
Это Telegram бот для астрологии и карт Таро на Python 3.11.

## Технологии
- aiogram 3.x для Telegram API
- aiohttp для HTTP запросов
- SQLAlchemy для базы данных
- Redis для кэширования (опционально)

## Стиль кода
- Используй type hints везде
- Все функции должны иметь docstrings
- Используй async/await для I/O операций
- Следуй PEP 8
- Максимальная длина строки 100 символов

## Структура проекта
- core/ - бизнес логика и сущности
- infrastructure/ - внешние сервисы и БД
- bot/ - Telegram обработчики
- services/ - сервисный слой

## Паттерны
- Repository pattern для БД
- Service layer для бизнес-логики
- Dependency injection где возможно
- Обработка ошибок через try/except с логированием

## Telegram специфика
- Всегда отвечай на callback_query
- Используй edit_message где возможно
- Добавляй throttling для команд
- Логируй все действия пользователей

## Безопасность
- Никогда не логируй токены и пароли
- Валидируй все входные данные
- Используй параметризованные запросы для БД
- Ограничивай доступ к админ командам